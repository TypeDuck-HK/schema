# Rime schema
# encoding: utf-8

__include: jyut6ping3.schema:/

schema:
  schema_id: jyut6ping3_fuzzy
  name: 粵語拼音（模糊音版）

speller:
  algebra:
    # 取消下兩行註釋，支援疑影交替： ng- 通 Ø-，Ø- 通 ng-
    - derive/^ng(?=[aeiou])//
    - derive/^(?=[aeiou])/ng/

    # 取消下行註釋，支援泥來合流： n- 併入 l- ，如「你」讀若「理」
    - derive/^n(?!g)/l/

    # 取消下行註釋，支援圓唇輔音合口韻缺位： gw-, kw- 併入 g-, k- ，如「國」讀若「各」、「廓」讀若「確」
    - derive/^(g|k)w/$1/

    # 取消下行註釋，支援獨立鼻音韻 ng 併入 m，如「吳」讀若「唔」
    - derive/^ng(?=\d)/m/

    - derive/^jy?([aeiou])/y$1/   # 容錯 je -> ye, jyu -> yu
    - derive/^jyu/ju/             # 容錯 jyu -> ju
    - derive/yu(?!ng|k)/y/        # 容錯 yu -> y
    - derive/(g|k)u(?!ng|k)/$1wu/ # 輔音圓唇
    - derive/^([ptkzcs])/$1h/     # 聲母容錯
    - derive/^b/p/                # 聲母容錯
    - derive/^d/t/                # 聲母容錯
    - derive/^g/k/                # 聲母容錯
    - derive/eoi(?=\d)/eoy/       # 容錯
    - derive/eo/oe/               # 容錯 eo/oe 不分
    - derive/oe/eo/               # 容錯 eo/oe 不分
    - derive/aa(?=\d)/a/          # 容錯
    - derive/\d//                 # 忽略聲調

    - abbrev/^([a-z]).+$/$1/      # 首字母簡拼

    - xform/1/v/                  # 陰平
    - xform/4/vv/                 # 陽平
    - xform/2/x/                  # 陰上
    - xform/5/xx/                 # 陽上
    - xform/3/q/                  # 陰去
    - xform/6/qq/                 # 陽去

translator:
  prism: jyut6ping3_fuzzy
